- name: Firebase Anahtarını Oluştur
        env:
          FIREBASE_KEY: ${{ secrets.FIREBASE_KEY }}
        run: |
          # 1. Anahtar var mı kontrol et
          if [ -z "$FIREBASE_KEY" ]; then
            echo "::error::HATA: FIREBASE_KEY GitHub Secret içinde bulunamadı veya boş!"
            echo "Lütfen Settings > Secrets > Actions kısmına gidip anahtarı eklediğinden emin ol."
            exit 1
          fi

          # 2. Dosyayı oluştur
          echo "$FIREBASE_KEY" > firebase_key.json
          
          # 3. Dosyanın içini kontrol et (İlk 5 karakteri yazdırır, güvenlidir)
          echo "Dosya oluşturuldu. Kontrol amaçlı başı şöyle görünüyor:"
          head -c 5 firebase_key.json
          echo "..."
